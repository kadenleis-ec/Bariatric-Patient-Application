<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mood Tracker</title>

    <link rel="stylesheet" href="../assets/css/mood_tracker.css">
</head>
<body>
    <div id="header">

        <div class="left_part">

            

            <a href="welcome.html">
                <div class="logo">
                    <img src="../assets/images/icons/mayo-logo.svg" alt="Mayo_Logo">
                </div>
            </a>
            
            <div class="nav_toggle" onclick="toggleMenu()">â˜°</div>

            <div class="main_menu">
                <a href="weight-tracker.html" class="nav_box">Weight Tracker</a>
                <a href="bmi.html" class="nav_box">BMI Calculator</a>
                <a href="meet_the_team.html" class="nav_box">Meet The Team</a>
                <a href="mood_tracker.html" class="nav_box">Mood Tracker</a>
                <a href="social-support.html" class="nav_box">Social Support</a>
                <a href="q-and-a.html" class="nav_box">Q & A</a>
            </div>
            
            <div class="dropdown_menu" id="dropdownMenu">
                <a href="weight-tracker.html" class="nav_box">Weight Tracker</a>
                <a href="bmi.html" class="nav_box">BMI Calculator</a>
                <a href="meet_the_team.html" class="nav_box">Meet The Team</a>
                <a href="mood_tracker.html" class="nav_box">Mood Tracker</a>
                <a href="social-support.html" class="nav_box">Social Support</a>
                <a href="q-and-a.html" class="nav_box">Q & A</a>
            </div>

            

        </div>
        

        <!-- the request appointment adn login button -->
        <div class="right_part">            

            <div class="right_box">
                <a href="appointment.html">Request appointment</a> 
            </div>
            <div class="right_box">
                <a href="../src/login.html">Log in</a>
            </div>
        </div>

    </div>





    <div id="input_part">

        <h1>How are you feeling today?</h1>

        <div>
            <button class="happy" onclick="setMood('Happy')">Happy</button>
            <button class="sad" onclick="setMood('Sad')">Sad</button>
            <button class="angry" onclick="setMood('Angry')">Angry</button>
            <button class="neutral" onclick="setMood('Neutral')">Neutral</button>
            <button class="excited" onclick="setMood('Excited')">Excited</button>
            <button class= "nervous" onclick="setMood('Nervous')">Nervous</button>


        </div>

        <div class="rating" id="rating-div" style="display: none;">
            <label for="rating">Rate your mood (1-10): </label>
            <input type="number" id="rating" name="rating" min="1" max="10" step="1">
            <button onclick="submitRating()">Submit Rating</button>
        </div>

        <div class="reason" id="reason-div" style="display: none;">
            <label for="reason">Why do you feel that way?</label>
            <textarea id="reason-text" placeholder="Enter your reason here..." rows="4" cols="50"></textarea>
            <button onclick="saveMood()">Submit Reason</button>
        </div>

        <h2>Your Mood History</h2>
        <ul id="mood-history-list">
            <!-- Mood history will appear here -->
        </ul>

        <button onclick="clearHistory()">Clear History</button>

    </div>

    <!-- <script src="Mayo clinic.js"></script> -->

    <script>
        let moodHistory = JSON.parse(localStorage.getItem('moodHistory')) || [];
        let currentMood = '';
        let currentRating = '';
        
        function setMood(mood) {
            currentMood = mood; // Set the selected mood
            document.getElementById('rating-div').style.display = 'block'; // Show the rating input
        }
        
        function submitRating() {
            const rating = document.getElementById('rating').value;
        
            if (rating < 1 || rating > 10) {
                alert("Please enter a rating between 1 and 10.");
                return;
            }
        
            currentRating = rating; // Store the selected rating
            document.getElementById('rating-div').style.display = 'none'; // Hide the rating input
            document.getElementById('reason-div').style.display = 'block'; // Show the reason input
        }
        
        function saveMood() {
            const reason = document.getElementById('reason-text').value.trim();
        
            if (!reason) {
                alert("Please enter a reason for how you're feeling.");
                return;
            }
        
            const currentDate = new Date().toLocaleString(); // Get current date and time
            moodHistory.push({ mood: currentMood, rating: currentRating, reason: reason, date: currentDate });
            localStorage.setItem('moodHistory', JSON.stringify(moodHistory)); // Save to local storage
        
            updateHistory();
        
            // Hide reason input and reset fields
            document.getElementById('reason-div').style.display = 'none';
            document.getElementById('rating').value = '';
            document.getElementById('reason-text').value = '';
        }
        
        function updateHistory() {
            const historyList = document.getElementById('mood-history-list');
            historyList.innerHTML = ''; // Clear existing history
        
            // Add each mood, rating, reason, and timestamp to the list
            moodHistory.forEach(entry => {
                const listItem = document.createElement('li');
                listItem.textContent = `${entry.mood} (Rating: ${entry.rating}) - ${entry.reason} - ${entry.date}`;
                historyList.appendChild(listItem);
            });
        }
        
        // Function to clear mood history
        function clearHistory() {
            moodHistory = [];
            localStorage.removeItem('moodHistory'); // Remove from local storage
            updateHistory();
        }
        
        // Initial load to display existing mood history
        updateHistory();
        
        
        
        
        
        
        </script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const toggleButton = document.querySelector('.nav_toggle');
            const menu = document.getElementById('dropdownMenu');

        toggleButton.addEventListener('click', function () {
        menu.classList.toggle('open');
        });
        });
    </script>

    <footer class="footer">
        <p>&copy; 2025 <span>CS268 Group 5</span>. All rights reserved.</p>
    </footer>
</body>
</html>